(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[290],{9290:(r,o,e)=>{"use strict";e.r(o),e.d(o,{AuthModule:()=>b});var s=e(1116),t=e(719),n=e(1462),i=e(6544),l=e(5366),a=e(5653),m=e(6878);function d(r,o){1&r&&(l.TgZ(0,"div",20),l._uU(1,"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435"),l.qZA())}let u=(()=>{class r{constructor(r,o,e,s){this.router=r,this.fb=o,this.authService=e,this.userService=s,this.showPassword=!1,this.showErrors=!1,this.loginForm=this.fb.group({email:["",[n.kI.email,n.kI.required]],password:["",[n.kI.minLength(8),n.kI.required]],remember:[!0]})}ngOnInit(){this.getUser(),this.loginForm.valueChanges.subscribe(()=>this.showErrors=!1)}getUser(){this.userService.userInfo$.subscribe(({id:r})=>this.userId=r)}onSubmit(){if(this.loginForm.valid){const r={email:this.loginForm.value.email,password:(0,i.sha256)(this.loginForm.value.password),remember:this.loginForm.value.remember};this.authService.login(r,r.remember).subscribe(r=>{this.userId=r.user.id,this.router.navigateByUrl("/profile")},r=>{this.showErrors=!0})}else this.showErrors=!0}}return r.\u0275fac=function(o){return new(o||r)(l.Y36(t.F0),l.Y36(n.qu),l.Y36(a.e),l.Y36(m.K))},r.\u0275cmp=l.Xpm({type:r,selectors:[["app-login"]],decls:30,vars:13,consts:[[1,"modal-dialog","modal-dialog-centered",3,"formGroup","ngSubmit"],[1,"modal-content","p-4"],[1,"modal-body","custom_body"],[1,"h3","mb-4","text-center"],[1,"d-flex","mb-2","flex-column"],["class","text-danger",4,"ngIf"],["type","login","placeholder","Email","formControlName","email",1,"form-control","mb-4"],[1,"mb-2"],[1,"input-group","input-group-merge","pass","rounded","mb-3"],["formControlName","password","placeholder","\u041f\u0430\u0440\u043e\u043b\u044c",1,"form-control","pass",3,"type"],[1,"d-flex","justify-content-between","mb-4"],[1,"mr-2"],["type","checkbox","formControlName","remember"],[1,"pointer"],["routerLink","/auth/recovery"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","w-100"],[1,"border-top","d-flex","justify-content-center"],[1,"mt-3","pe-auto"],["routerLink","/auth/register",1,"font-bold","pointer"],[1,"text-danger"]],template:function(r,o){1&r&&(l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return o.onSubmit()}),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"p",3),l._uU(4,"\u0412\u0445\u043e\u0434"),l.qZA(),l.TgZ(5,"div"),l.TgZ(6,"div",4),l.TgZ(7,"label"),l._uU(8,"Email"),l.qZA(),l.YNc(9,d,2,0,"div",5),l.qZA(),l._UZ(10,"input",6),l.qZA(),l.TgZ(11,"label",7),l._uU(12,"Password"),l.qZA(),l.TgZ(13,"div",8),l._UZ(14,"input",9),l.qZA(),l.TgZ(15,"div",10),l.TgZ(16,"div",11),l._UZ(17,"input",12),l._uU(18," \u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f "),l.qZA(),l.TgZ(19,"div",13),l.TgZ(20,"a",14),l._uU(21,"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"div",15),l.TgZ(23,"button",16),l._uU(24,"\u0412\u043e\u0439\u0442\u0438"),l.qZA(),l.qZA(),l.TgZ(25,"div",17),l.TgZ(26,"div",18),l._uU(27,"\u0415\u0449\u0435 \u043d\u0435 "),l.TgZ(28,"a",19),l._uU(29,"\u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c?"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&r&&(l.Q6J("formGroup",o.loginForm),l.xp6(7),l.ekj("text-danger",o.showErrors),l.xp6(2),l.Q6J("ngIf",o.showErrors),l.xp6(1),l.ekj("border-danger",o.showErrors),l.xp6(1),l.ekj("text-danger",o.showErrors),l.xp6(2),l.ekj("border-danger",(null==o.loginForm.controls.password?null:o.loginForm.controls.password.errors)||(null==o.loginForm.controls.confirmPassword?null:o.loginForm.controls.confirmPassword.errors)||o.showErrors),l.xp6(1),l.ekj("border-danger",o.showErrors),l.Q6J("type",o.showPassword?"text":"password"))},directives:[n._Y,n.JL,n.sg,s.O5,n.Fj,n.JJ,n.u,n.Wl,t.yS],styles:["@media screen and (min-width:576px){.modal-dialog[_ngcontent-%COMP%]{max-width:432px;margin:1.75rem auto}}.custom_body[_ngcontent-%COMP%]{padding:0!important}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),r})();var g=e(5968),p=e(2504);function c(r,o){1&r&&(l.TgZ(0,"span",23),l._uU(1," (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)"),l.qZA())}function h(r,o){1&r&&(l.TgZ(0,"span",24),l._uU(1," \u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 "),l.qZA())}const Z=[{path:"",redirectTo:"login"},{path:"login",component:u},{path:"register",component:(()=>{class r{constructor(r,o,e){this.fb=r,this.authService=o,this.router=e,this.showPassword=!1,this.showErrors=!1,this.registerForm=this.fb.group({firstName:["",[n.kI.required]],lastName:["",[n.kI.required]],email:["",[n.kI.email,n.kI.required]],password:["",[n.kI.minLength(5),n.kI.required]],confirmPassword:["",[n.kI.required]]},{validator:(0,p.Y)("password","confirmPassword")})}ngOnInit(){this.registerForm.valueChanges.subscribe(()=>this.showErrors=!1)}onSubmit(){if(this.registerForm.valid){const r={firstName:this.registerForm.value.firstName,lastName:this.registerForm.value.lastName,email:this.registerForm.value.email,password:(0,i.sha256)(this.registerForm.value.password),confirmPassword:(0,i.sha256)(this.registerForm.value.confirmPassword)};this.authService.register(r).subscribe(r=>console.log(r)),this.router.navigateByUrl("/auth/login")}else this.showErrors=!0,console.log("not valid")}}return r.\u0275fac=function(o){return new(o||r)(l.Y36(n.qu),l.Y36(a.e),l.Y36(t.F0))},r.\u0275cmp=l.Xpm({type:r,selectors:[["app-register"]],decls:39,vars:29,consts:[[1,"modal-dialog","modal-dialog-centered",3,"formGroup","ngSubmit"],[1,"modal-content","p-4"],[1,"modal-body","custom_body"],[1,"h3","text-center","pb-4"],[1,"d-flex","justify-content-between"],[1,"form-group","mr-3","mb-3"],[1,"mb-2"],["type","text","placeholder","\u0418\u043c\u044f","formControlName","firstName",1,"form-control","text-dark"],[1,"form-group","mb-3"],["type","text","placeholder","\u0424\u0430\u043c\u0438\u043b\u0438\u044f","formControlName","lastName",1,"form-control","text-dark"],["type","email","placeholder","Email","formControlName","email",1,"form-control","text-dark"],[1,"form-group"],["class","text-sm text-danger",4,"ngIf"],[1,"input-group","input-group-merge","pass","rounded","mb-3"],["formControlName","password","placeholder","\u041f\u0430\u0440\u043e\u043b\u044c",1,"form-control","pass",3,"type"],[1,"mb-4"],[1,"input-group","input-group-merge","pass","rounded"],["formControlName","confirmPassword","placeholder","\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",1,"form-control","pass",3,"type"],["class"," text-danger text-sm",4,"ngIf"],["type","submit",1,"mb-4","mt-3","btn","btn-primary","w-100"],[1,"border-top"],[1,"mt-3","d-flex","justify-content-center"],["routerLink","/auth/login",1,"font-bold"],[1,"text-sm","text-danger"],[1,"text-danger","text-sm"]],template:function(r,o){1&r&&(l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return o.onSubmit()}),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"p",3),l._uU(4,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),l.qZA(),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"label",6),l._uU(8,"\u0418\u043c\u044f"),l.qZA(),l._UZ(9,"input",7),l.qZA(),l.TgZ(10,"div",8),l.TgZ(11,"label",6),l._uU(12,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),l.qZA(),l._UZ(13,"input",9),l.qZA(),l.qZA(),l.TgZ(14,"div",8),l.TgZ(15,"label",6),l._uU(16,"Email"),l.qZA(),l._UZ(17,"input",10),l.qZA(),l.TgZ(18,"div",11),l.TgZ(19,"div"),l.TgZ(20,"label",6),l._uU(21,"\u041f\u0430\u0440\u043e\u043b\u044c"),l.qZA(),l.YNc(22,c,2,0,"span",12),l.qZA(),l.TgZ(23,"div",13),l._UZ(24,"input",14),l.qZA(),l.TgZ(25,"div",15),l.TgZ(26,"label",6),l._uU(27,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),l.qZA(),l.TgZ(28,"div",16),l._UZ(29,"input",17),l.qZA(),l.YNc(30,h,2,0,"span",18),l.qZA(),l.qZA(),l.TgZ(31,"button",19),l._uU(32,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),l.qZA(),l.TgZ(33,"div",20),l.TgZ(34,"div",21),l.TgZ(35,"p"),l.TgZ(36,"a",22),l._uU(37,"\u0412\u043e\u0439\u0442\u0438 "),l.qZA(),l._uU(38," \u0432 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&r&&(l.Q6J("formGroup",o.registerForm),l.xp6(7),l.ekj("text-danger",o.showErrors),l.xp6(2),l.ekj("border-danger",o.showErrors),l.xp6(2),l.ekj("text-danger",o.showErrors),l.xp6(2),l.ekj("border-danger",o.showErrors),l.xp6(2),l.ekj("text-danger",o.showErrors),l.xp6(2),l.ekj("border-danger",o.showErrors),l.xp6(3),l.ekj("text-danger",((null==o.registerForm.controls.password?null:o.registerForm.controls.password.errors)||(null==o.registerForm.controls.confirmPassword?null:o.registerForm.controls.confirmPassword.errors))&&o.showErrors),l.xp6(2),l.Q6J("ngIf",((null==o.registerForm.controls.password?null:o.registerForm.controls.password.errors)||(null==o.registerForm.controls.confirmPassword?null:o.registerForm.controls.confirmPassword.errors))&&o.showErrors),l.xp6(1),l.ekj("border-danger",((null==o.registerForm.controls.password?null:o.registerForm.controls.password.errors)||(null==o.registerForm.controls.confirmPassword?null:o.registerForm.controls.confirmPassword.errors))&&o.showErrors),l.xp6(1),l.ekj("border-danger",o.showErrors),l.Q6J("type",o.showPassword?"text":"password"),l.xp6(2),l.ekj("text-danger",((null==o.registerForm.controls.password?null:o.registerForm.controls.password.errors)||(null==o.registerForm.controls.confirmPassword?null:o.registerForm.controls.confirmPassword.errors))&&o.showErrors),l.xp6(2),l.ekj("border-danger",((null==o.registerForm.controls.password?null:o.registerForm.controls.password.errors)||(null==o.registerForm.controls.confirmPassword?null:o.registerForm.controls.confirmPassword.errors))&&o.showErrors),l.xp6(1),l.ekj("border-danger",o.showErrors),l.Q6J("type",o.showPassword?"text":"password"),l.xp6(1),l.Q6J("ngIf",(null==o.registerForm.controls.confirmPassword.errors?null:o.registerForm.controls.confirmPassword.errors.mustMatch)&&o.showErrors))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,s.O5,t.yS],styles:[".custom_body[_ngcontent-%COMP%]{padding:0!important}"]}),r})()},{path:"recovery",component:g.W}];let f=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=l.oAB({type:r}),r.\u0275inj=l.cJS({imports:[[t.Bz.forChild(Z)],t.Bz]}),r})();var w=e(5896);let b=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=l.oAB({type:r}),r.\u0275inj=l.cJS({providers:[w.Kz],imports:[[s.ez,f,n.UX]]}),r})()}}]);