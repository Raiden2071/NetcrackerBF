(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[638],{4638:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AnnouncmentModule:()=>_});var s=n(1116),i=n(1462),o=n(719),r=n(7701),c=n(4019),l=n(4689),a=n(5366),u=n(5896),g=n(6878),d=n(3492);let p=(()=>{class e{constructor(e,t,n,s){this.fb=e,this.activeModal=t,this.userService=n,this.toastr=s,this.showErrors=!1}ngOnInit(){this.getUser(),this.annoucementForm=this.fb.group({title:["",[i.kI.required]],description:["",[i.kI.required]],address:["",[i.kI.required]],idUser:[this.userId]}),this.annoucementForm.valueChanges.subscribe(()=>this.showErrors=!1)}getUser(){this.userService.userInfo$.subscribe(({id:e})=>this.userId=e)}addAnnouncement(){this.annoucementForm.valid?this.activeModal.close(this.annoucementForm.value):(this.toastr.error("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f.","",{timeOut:2e3}),this.showErrors=!0)}close(){this.activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(i.qu),a.Y36(u.Kz),a.Y36(g.K),a.Y36(d._W))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-create-announcment"]],decls:18,vars:13,consts:[[1,"m-5",3,"formGroup","ngSubmit"],[1,"mb-4"],[1,"form-group","mb-3"],["for","title",1,"mb-2"],["type","text","formControlName","title","placeholder","Enter title",1,"form-control"],["for","address",1,"mb-1"],["type","text","formControlName","address","placeholder","Enter address",1,"form-control"],[1,"form-group","mb-4"],["for","description",1,"mb-1"],["formControlName","description","cols","20","rows","5","placeholder","Enter description...",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100"],["src","/assets/images/icons/close_black_24dp.svg",1,"cancel",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"form",0),a.NdJ("ngSubmit",function(){return t.addAnnouncement()}),a.TgZ(1,"h1",1),a._uU(2,"Create announcement"),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"label",3),a._uU(5,"Title"),a.qZA(),a._UZ(6,"input",4),a.qZA(),a.TgZ(7,"div",2),a.TgZ(8,"label",5),a._uU(9,"Address"),a.qZA(),a._UZ(10,"input",6),a.qZA(),a.TgZ(11,"div",7),a.TgZ(12,"label",8),a._uU(13,"Description"),a.qZA(),a._UZ(14,"textarea",9),a.qZA(),a.TgZ(15,"button",10),a._uU(16,"Promise"),a.qZA(),a.qZA(),a.TgZ(17,"img",11),a.NdJ("click",function(){return t.close()}),a.qZA()),2&e&&(a.Q6J("formGroup",t.annoucementForm),a.xp6(4),a.ekj("text-danger",t.showErrors),a.xp6(2),a.ekj("border-danger",t.showErrors),a.xp6(2),a.ekj("text-danger",t.showErrors),a.xp6(2),a.ekj("border-danger",t.showErrors),a.xp6(2),a.ekj("text-danger",t.showErrors),a.xp6(2),a.ekj("border-danger",t.showErrors))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:["textarea[_ngcontent-%COMP%]{resize:none}.cancel[_ngcontent-%COMP%]{position:absolute;right:15px;top:15px;width:24px}"]}),e})();var m=n(2693);function h(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"img",27),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).onLike(t)}),a.qZA()}}function Z(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"img",28),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).onLike(t)}),a.qZA()}}function f(e,t){if(1&e&&(a.TgZ(0,"div",14),a.TgZ(1,"div",15),a.TgZ(2,"div",16),a.TgZ(3,"div",17),a.TgZ(4,"div",18),a._UZ(5,"img",19),a.TgZ(6,"div"),a.TgZ(7,"div"),a._uU(8),a.qZA(),a.TgZ(9,"div"),a._uU(10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",20),a._uU(12),a.qZA(),a.qZA(),a.TgZ(13,"div",21),a.TgZ(14,"div",22),a._UZ(15,"img",23),a.TgZ(16,"div"),a._uU(17),a.ALo(18,"date"),a.qZA(),a.qZA(),a.TgZ(19,"div",22),a._UZ(20,"img",24),a.TgZ(21,"div"),a._uU(22),a.qZA(),a.qZA(),a.TgZ(23,"div",22),a.YNc(24,h,1,0,"img",25),a.YNc(25,Z,1,0,"img",26),a.TgZ(26,"div"),a._uU(27),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(8),a.Oqu(null==e?null:e.title),a.xp6(2),a.AsE("by ",null==e.user?null:e.user.firstName," ",null==e.user?null:e.user.lastName,""),a.xp6(2),a.hij(" ",null==e?null:e.description," "),a.xp6(5),a.hij("",a.xi3(18,9,null==e?null:e.date,"yyyy.MM.dd")," "),a.xp6(5),a.Oqu(null==e?null:e.address),a.xp6(2),a.Q6J("ngIf",null==e?null:e.isLiked),a.xp6(1),a.Q6J("ngIf",!(null!=e&&e.isLiked)),a.xp6(2),a.Oqu(null==e?null:e.participantsCap)}}function v(e,t){if(1&e&&(a.TgZ(0,"div",12),a.YNc(1,f,28,12,"div",13),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngForOf",e.announcements)}}const b=[{path:"",component:(()=>{class e{constructor(e,t){this.modalService=e,this.http=t,this.searchProject=new i.NI(""),this.page=1,this.totalElements=8}ngOnInit(){this.getAnnouncement(),this.retrieveFilterChanges()}getAnnouncement(){this.http.get(`announcement/search?page=${this.page}&title=${this.searchProject.value}`).subscribe(e=>{this.announcements=e.content,this.totalElements=e.totalElements})}retrieveFilterChanges(){this.searchProject.valueChanges.pipe((0,r.b)(300),(0,c.b)(()=>this.page=1)).subscribe(()=>this.getAnnouncement())}onLike(e){this.http.post("announcement/like",{idAnnouncement:e.id}).subscribe(()=>this.getAnnouncement())}createAnnouncement(){this.modalService.open(p,{centered:!0}).closed.pipe((0,l.w)(e=>this.http.post("announcement/create",e))).subscribe(()=>this.getAnnouncement())}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.FF),a.Y36(m.eN))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-announcment"]],decls:14,vars:7,consts:[[1,"m-5"],[1,"col-xl-4","col-6"],[1,"mb-5","input-group","input-group-merge"],["type","search","placeholder","\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u043e\u0435\u043a\u0442",1,"form-control",3,"formControl"],[1,"input-group-append"],[1,"input-group-text"],["src","/assets/images/icons/search_black_24dp.svg","alt","search",1,"svg"],[1,"mb-5"],["class","row flex-wrap card-deck",4,"ngIf"],[1,"d-flex","justify-content-between"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","collectionSizeChange","pageChange"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"row","flex-wrap","card-deck"],["class","col-12 col-lg-6 col-xl-4 mb-3 d-flex align-items-stretch full_card",4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","col-xl-4","mb-3","d-flex","align-items-stretch","full_card"],[1,"card","w-100"],[1,"card-body","d-flex","body"],[1,"d-flex","flex-column","col-9"],[1,"d-flex","mb-2","image"],["src","/assets/user.jpg","alt","image",1,"me-2"],[1,"description"],[1,"d-flex","flex-column","justify-content-between","col-3","second__card"],[1,"d-flex","word-wrap","svg"],["src","/assets/images/icons/today_black_24dp.svg","alt","date",1,"svg","me-1"],["src","/assets/images/icons/location_on_black_24dp.svg","alt","address",1,"svg","me-1"],["src","/assets/images/icons/heart.svg","alt","like","class","svg me-1",3,"click",4,"ngIf"],["src","/assets/images/icons/heart-outline.svg","alt","like","class","svg me-1",3,"click",4,"ngIf"],["src","/assets/images/icons/heart.svg","alt","like",1,"svg","me-1",3,"click"],["src","/assets/images/icons/heart-outline.svg","alt","like",1,"svg","me-1",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a._UZ(3,"input",3),a.TgZ(4,"div",4),a.TgZ(5,"span",5),a._UZ(6,"img",6),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"h2",7),a._uU(8,"All Announcment"),a.qZA(),a.YNc(9,v,2,1,"div",8),a.TgZ(10,"div",9),a.TgZ(11,"ngb-pagination",10),a.NdJ("collectionSizeChange",function(e){return t.totalElements=e})("pageChange",function(e){return t.page=e})("pageChange",function(){return t.getAnnouncement()}),a.qZA(),a.TgZ(12,"button",11),a.NdJ("click",function(){return t.createAnnouncement()}),a._uU(13,"Create Announcement"),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.Q6J("formControl",t.searchProject),a.xp6(6),a.Q6J("ngIf",t.announcements),a.xp6(2),a.Q6J("collectionSize",t.totalElements)("pageSize",8)("page",t.page)("rotate",!0)("boundaryLinks",!0))},directives:[i.Fj,i.JJ,i.oH,s.O5,u.N9,s.sg],pipes:[s.uU],styles:[".image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}.word-wrap[_ngcontent-%COMP%]{font-size:12px;word-break:break-all;word-wrap:break-word}.svg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px}.full_card[_ngcontent-%COMP%]{min-height:200px;max-height:450px}.second__card[_ngcontent-%COMP%]{min-width:80px}.description[_ngcontent-%COMP%]{cursor:pointer;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow-y:hidden}[_nghost-%COMP%]{width:100%;height:100%;overflow-x:hidden}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.Bz.forChild(b)],o.Bz]}),e})();var A=n(8508);(0,s.qS)(n.n(A)(),"ru");let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.ez,x,i.u5,i.UX,u.IJ]]}),e})()}}]);