{"version":3,"sources":["./src/app/modules/auth/components/recovery/recovery.component.ts","./src/app/modules/auth/components/recovery/recovery.component.html","./src/app/modules/auth/validators/must-match.validator.ts"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { AuthService } from '../../services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-recovery',\r\n  templateUrl: './recovery.component.html',\r\n  styleUrls: ['./recovery.component.scss']\r\n})\r\nexport class RecoveryComponent implements OnInit {\r\n\r\n  @Input() isModal = false;\r\n  showErrors = false;\r\n  recoveryForm: FormGroup = this.fb.group({\r\n    email:  ['', [Validators.email, Validators.required]],\r\n  });\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private toastr: ToastrService,\r\n    private activeModal: NgbActiveModal\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.recoveryForm.valueChanges.subscribe(() => this.showErrors = false);\r\n  }\r\n\r\n  openLogin(): void {\r\n    this.activeModal.close();\r\n    this.router.navigateByUrl('/auth/login')\r\n  }\r\n\r\n  onSubmit(): void {\r\n    console.log(this.recoveryForm);\r\n    \r\n    if(this.recoveryForm.valid) {\r\n      this.toastr.info(`Мы отправили ссылку для восстановления доступа к вашему аккаунту на адрес ${this.recoveryForm.value.email}.`, '', {\r\n        timeOut: 2000,\r\n      });    \r\n      if(!this.isModal) {\r\n        this.router.navigateByUrl('/auth/login')\r\n      }\r\n      this.authService.forgotPassword(this.recoveryForm.value).subscribe();\r\n    }\r\n    else {\r\n      this.showErrors = true;\r\n    }\r\n  }\r\n\r\n}\r\n","<form *ngIf=\"!isModal\" [formGroup]=\"recoveryForm\" (ngSubmit)=\"onSubmit()\" class=\"modal-dialog modal-dialog-centered\">\r\n  <div class=\"modal-content px-5 py-4\">\r\n    <div class=\"modal-body custom_body mb-4\">\r\n      <p class=\"h3 text-center pb-4\">Enter your email</p>\r\n      <div class=\"mb-4\">Please enter the email you used to enter the site</div>\r\n      <div class=\"form-group mb-4\">\r\n        <input type=\"text\" class=\"form-control text-dark\" formControlName=\"email\" \r\n        placeholder=\"email@gmail.com\"\r\n        [class.border-danger]=\"showErrors\">\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary w-100\"\r\n      [disabled]=\"recoveryForm.controls.email.invalid\"\r\n      >Next</button>\r\n    </div>\r\n    <div class=\"border-top\">\r\n      <div class=\"mt-3 d-flex justify-content-center\">\r\n        <p><a class=\"font-bold\" routerLink=\"/auth/login\">Войти </a>\r\n          в существующий аккаунт</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n<form *ngIf=\"isModal\" [formGroup]=\"recoveryForm\" (ngSubmit)=\"onSubmit()\">\r\n  <div class=\"px-5 py-4\">\r\n    <div class=\"custom_body mb-4\">\r\n      <p class=\"h3 text-center pb-4\">Enter your email</p>\r\n      <div class=\"mb-4\">Please enter the email you used to enter the site</div>\r\n      <div class=\"form-group mb-4\">\r\n        <input type=\"text\" class=\"form-control text-dark\" formControlName=\"email\" \r\n        placeholder=\"email@gmail.com\"\r\n        [class.border-danger]=\"showErrors\">\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary w-100\"\r\n      [disabled]=\"recoveryForm.controls.email.invalid\"\r\n      >Next</button>\r\n    </div>\r\n    <div class=\"border-top\">\r\n      <div class=\"mt-3 d-flex justify-content-center\">\r\n        <div>\r\n          <span class=\"font-bold login\" (click)=\"openLogin()\">Войти</span>\r\n          <span> в существующий аккаунт</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n","import { FormGroup } from '@angular/forms';\r\n\r\nexport function MustMatch(controlName: string, matchingControlName: string) {\r\n  return (formGroup: FormGroup) => {\r\n    const control = formGroup.controls[controlName];\r\n    const matchingControl = formGroup.controls[matchingControlName];\r\n\r\n    if (matchingControl.errors && !matchingControl.errors.mustMatch) {\r\n      return;\r\n    }\r\n    if (control.value !== matchingControl.value) {\r\n      matchingControl.setErrors({ mustMatch: true });\r\n    } else {\r\n      matchingControl.setErrors(null);\r\n    }\r\n  };\r\n}\r\n"],"sourceRoot":"webpack:///"}