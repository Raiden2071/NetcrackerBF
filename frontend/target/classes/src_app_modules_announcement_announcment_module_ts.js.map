{"version":3,"sources":["./src/app/modals/create-announcement/components/create-announcement.ts","./src/app/modals/create-announcement/components/create-announcement.html","./src/app/modules/announcement/announcment-routing.module.ts","./src/app/modules/announcement/announcment.module.ts","./src/app/modules/announcement/components/announcment.component.ts","./src/app/modules/announcement/components/announcment.component.html"],"names":[],"mappings":"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","file":"src_app_modules_announcement_announcment_module_ts.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { UserService } from 'src/app/shared/services/users.service';\r\n\r\n@Component({\r\n  selector: 'app-create-announcment',\r\n  templateUrl: './create-announcement.html',\r\n  styleUrls: ['./create-announcement.scss']\r\n})\r\nexport class CreateAnnouncementComponent implements OnInit {\r\n\r\n  annoucementForm: FormGroup;\r\n  showErrors = false;\r\n  userId: number;\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private activeModal: NgbActiveModal,\r\n    private userService: UserService,\r\n    private toastr: ToastrService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getUser();\r\n    this.annoucementForm = this.fb.group({\r\n      title:       ['', [Validators.required]],\r\n      description: ['', [Validators.required]],\r\n      address:     ['', [Validators.required]],\r\n      idUser:      [this.userId]\r\n    });\r\n    this.annoucementForm.valueChanges.subscribe(() => this.showErrors = false);\r\n  }\r\n\r\n  getUser(): void {\r\n    this.userService.userInfo$.subscribe(({id}) => this.userId = id);\r\n  }\r\n\r\n  addAnnouncement() {\r\n    if(this.annoucementForm.valid) {\r\n      this.activeModal.close(this.annoucementForm.value);\r\n    }\r\n    else {\r\n      this.toastr.error(\"Please fill in all fields.\", '', {\r\n        timeOut: 2000,\r\n      });    \r\n      this.showErrors = true;\r\n    }\r\n  }\r\n\r\n  close(): void {\r\n    this.activeModal.close();\r\n  }\r\n  \r\n}\r\n","<form [formGroup]=\"annoucementForm\" (ngSubmit)=\"addAnnouncement()\" class=\"m-5\">\r\n  <h1 class=\"mb-4\">Create announcement</h1>\r\n  <div class=\"form-group mb-3\">\r\n    <label  for=\"title\" class=\"mb-2\" [class.text-danger]=\"showErrors\">Title</label>\r\n    <input type=\"text\" formControlName=\"title\" class=\"form-control\" placeholder=\"Enter title\"\r\n    [class.border-danger]=\"showErrors\">\r\n  </div>\r\n  <div class=\"form-group mb-3\">\r\n    <label for=\"address\" class=\"mb-1\" [class.text-danger]=\"showErrors\">Address</label>\r\n    <input type=\"text\" formControlName=\"address\" class=\"form-control\" placeholder=\"Enter address\"\r\n    [class.border-danger]=\"showErrors\">\r\n  </div>\r\n  <div class=\"form-group mb-4\">\r\n    <label for=\"description\" class=\"mb-1\" [class.text-danger]=\"showErrors\">Description</label>\r\n    <textarea formControlName=\"description\"  cols=\"20\" rows=\"5\" class=\"form-control\" placeholder=\"Enter description...\" [class.border-danger]=\"showErrors\"></textarea>\r\n  </div>\r\n  <button type=\"submit\" class=\"btn btn-primary w-100\">Promise</button>\r\n</form>\r\n<img src=\"/assets/images/icons/close_black_24dp.svg\" class=\"cancel\" (click)=\"close()\">\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AnnouncmentComponent } from './components/announcment.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: AnnouncmentComponent },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AnnouncmentRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule, registerLocaleData } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AnnouncmentRoutingModule } from './announcment-routing.module';\r\nimport { AnnouncmentComponent } from './components/announcment.component';\r\nimport { CreateAnnouncementComponent } from 'src/app/modals/create-announcement/components/create-announcement';\r\nimport localeRu from '@angular/common/locales/ru';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\n\r\nregisterLocaleData(localeRu, 'ru');\r\n\r\n@NgModule({\r\n  declarations: [AnnouncmentComponent,CreateAnnouncementComponent],\r\n  imports: [\r\n    CommonModule,\r\n    AnnouncmentRoutingModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgbModule\r\n  ]\r\n})\r\nexport class AnnouncmentModule { }\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { debounceTime, switchMap, tap } from 'rxjs/operators';\r\nimport { CreateAnnouncementComponent } from 'src/app/modals/create-announcement/components/create-announcement';\r\nimport { Announcement } from 'src/app/models/announcements';\r\n\r\n@Component({\r\n  selector: 'app-announcment',\r\n  templateUrl: './announcment.component.html',\r\n  styleUrls: ['./announcment.component.scss']\r\n})\r\nexport class AnnouncmentComponent implements OnInit {\r\n\r\n  announcements: Announcement;\r\n  searchProject: FormControl = new FormControl('');\r\n  page = 1;\r\n  totalElements = 6;\r\n  \r\n  constructor(\r\n    private modalService: NgbModal,\r\n    private http: HttpClient\r\n  ) { }\r\n\r\n  ngOnInit(): void {    \r\n    this.getAnnouncement();\r\n    this.retrieveFilterChanges();    \r\n  }\r\n\r\n  getAnnouncement(): void {\r\n    this.http.get<Announcement>(`announcement/all?page=${this.page}`).subscribe((announcement: any) => {\r\n      this.announcements = announcement.content\r\n      this.totalElements = announcement.totalElements\r\n    });\r\n  }\r\n  \r\n  getSearchAnnouncement():void {\r\n    this.http.get<Announcement>(`announcement/search?page=${this.page}&title=${this.searchProject.value}`).subscribe((announcement: any) => {\r\n      this.announcements = announcement.content\r\n      this.totalElements = announcement.totalElements\r\n    });\r\n  }\r\n\r\n  retrieveFilterChanges() {    \r\n    this.searchProject.valueChanges.pipe(\r\n      debounceTime(300),\r\n      tap(() => this.page=1)).subscribe((searchValue) => searchValue == '' ? this.getAnnouncement() : this.getSearchAnnouncement());\r\n  }\r\n\r\n  onLike(annoucement) {\r\n    this.http.post('announcement/like', {idAnnouncement: annoucement.id}).subscribe(() => this.getAnnouncement());\r\n  }\r\n\r\n  createAnnouncement(): void {\r\n    const modalRef = this.modalService.open(CreateAnnouncementComponent, { centered: true });\r\n    modalRef.closed.pipe(\r\n      switchMap(announcement => this.http.post<Announcement>('announcement/create', announcement))\r\n    ).subscribe(() =>\r\n      this.getAnnouncement()\r\n    );\r\n  }\r\n}\r\n","<div class=\"m-5\">\r\n  <!-- Search -->\r\n  <div class=\"col-xl-4 col-6\">\r\n    <div class=\"mb-5 input-group input-group-merge\">\r\n      <input type=\"search\" class=\"form-control\" placeholder=\"Find announcement\" [formControl]=\"searchProject\">\r\n      <div class=\"input-group-append\">\r\n        <span class=\"input-group-text\">\r\n          <img src=\"/assets/images/icons/search_black_24dp.svg\" alt=\"search\" class=\"svg\">\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <h2 class=\"mb-5\">All Announcment</h2>\r\n  <!-- Cards -->\r\n  <div *ngIf=\"announcements\" class=\"row flex-wrap card-deck\">\r\n    <div *ngFor=\"let annoucement of announcements\"\r\n      class=\"col-12 col-lg-6 col-xl-4 mb-3 d-flex align-items-stretch full_card\">\r\n      <div class=\"card w-100\">\r\n        <div class=\"card-body d-flex body\">\r\n          <!-- first half of the card -->\r\n          <div class=\"d-flex flex-column col-9\">\r\n            <div class=\"d-flex mb-2 image\">\r\n              <img src=\"/assets/user.jpg\" alt=\"image\" class=\"me-2\">\r\n              <div>\r\n                <div>{{annoucement?.title}}</div>\r\n                <div>by {{annoucement.user?.firstName}} {{annoucement.user?.lastName}}</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"description\">\r\n              {{annoucement?.description}}\r\n            </div>\r\n          </div>\r\n          <!-- second half of the card -->\r\n          <div class=\"d-flex flex-column justify-content-between col-3 second__card\">\r\n            <div class=\"d-flex word-wrap svg\">\r\n              <img src=\"/assets/images/icons/today_black_24dp.svg\" alt=\"date\" class=\"svg me-1\">\r\n              <div>{{annoucement?.date | date:\"yyyy.MM.dd\"}} </div>\r\n            </div>\r\n            <div class=\"d-flex word-wrap svg\">\r\n              <img src=\"/assets/images/icons/location_on_black_24dp.svg\" alt=\"address\" class=\"svg me-1\">\r\n              <div>{{annoucement?.address}}</div>\r\n            </div>\r\n            <div class=\"d-flex word-wrap svg\">\r\n              <img src=\"/assets/images/icons/heart.svg\" *ngIf=\"annoucement?.isLiked\" alt=\"like\" class=\"svg me-1\"\r\n                (click)=\"onLike(annoucement)\">\r\n              <img src=\"/assets/images/icons/heart-outline.svg\" *ngIf=\"!annoucement?.isLiked\" alt=\"like\"\r\n                class=\"svg me-1\" (click)=\"onLike(annoucement)\">\r\n              <div>{{annoucement?.participantsCap}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--  -->\r\n  <div class=\"d-flex justify-content-between\">\r\n    <ngb-pagination [(collectionSize)]=\"totalElements\" [pageSize]=\"6\" [(page)]=\"page\" [rotate]=\"true\"\r\n      [boundaryLinks]=\"true\" (pageChange)=\"getAnnouncement()\"></ngb-pagination>\r\n    <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"createAnnouncement()\">Create Announcement</button>\r\n  </div>\r\n\r\n</div>\r\n"],"sourceRoot":"webpack:///"}
